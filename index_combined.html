
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Market Dashboard</title>
    <style>
        body {
            background-color: #111;
            color: #fefefe;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        h1 {
            background-color: #222;
            color: gold;
            padding: 20px;
            margin: 0;
            font-size: 28px;
        }
        section {
            padding: 20px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 40px;
        }
        th, td {
            border: 1px solid #444;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #222;
        }
        .error {
            color: #ff6b6b;
            margin: 5px 0;
        }
        .loading {
            color: #ccc;
        }
        .source-label {
            font-weight: bold;
            color: #66ccff;
            margin-top: 15px;
        }
    </style>
</head>
<body>

<h1>üìä Live Market Dashboard</h1>

<section id="squeeze-radar">
    <h2>üß† Short Squeeze Radar</h2>
    <table id="squeezeTable">
        <thead>
            <tr>
                <th>Ticker</th>
                <th>Company</th>
                <th>Float</th>
                <th>Short %</th>
                <th>Avg Volume</th>
                <th>Notes</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</section>

<section id="social-tracker">
    <h2>üì£ Social Media Sentiment Radar</h2>
    <p>Tracking live mentions from Reddit (<code>r/shortsqueeze</code>, <code>r/wallstreetbets</code>, and <code>r/stocks</code>).</p>
    <div id="reddit-errors" class="error"></div>
    <table id="redditTable">
        <thead>
            <tr>
                <th>Subreddit</th>
                <th>Ticker</th>
                <th>Mentions</th>
                <th>Rank</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</section>

<script>
function fetchJSON(url) {
    return fetch(url)
        .then(response => {
            if (!response.ok) throw new Error('HTTP error ' + response.status);
            return response.json();
        });
}

function loadSqueezeRadar() {
    fetchJSON('squeeze-radar.json')
        .then(data => {
            const tbody = document.querySelector("#squeezeTable tbody");
            tbody.innerHTML = "";
            data.forEach(item => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${item.ticker}</td>
                    <td>${item.company}</td>
                    <td>${item.float}</td>
                    <td>${item.short_percent}</td>
                    <td>${item.avg_volume}</td>
                    <td>${item.notes}</td>
                `;
                tbody.appendChild(row);
            });
        })
        .catch(error => {
            console.error('Squeeze Radar Error:', error);
        });
}

function loadRedditSentiment() {
    fetchJSON('reddit-sentiment.json')
        .then(data => {
            const tbody = document.querySelector("#redditTable tbody");
            tbody.innerHTML = "";
            data.forEach((item, index) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${item.subreddit}</td>
                    <td>${item.ticker}</td>
                    <td>${item.mentions}</td>
                    <td>${index + 1}</td>
                `;
                tbody.appendChild(row);
            });
        })
        .catch(error => {
            console.error('Reddit Tracker Error:', error);
            document.getElementById("reddit-errors").textContent = "‚ö†Ô∏è Could not load Reddit sentiment data.";
        });
}

// Run on page load
loadSqueezeRadar();
loadRedditSentiment();
</script>

</body>
</html>
